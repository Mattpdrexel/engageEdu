<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Video Quiz</title>
</head>
<body>
  <div id="player"></div>
  <div id="questions"></div>

  <script>
    // Load the YouTube Player API asynchronously
    var tag = document.createElement('script');
    tag.src = 'https://www.youtube.com/iframe_api';
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // Create variables to store YouTube player and questions
    var player;
    var questions = [
      {"index": "Question_1", "timestamp": 59.68, "duration": 11.0, "question": "What is the largest mammal in the world?", "question_type": "Poll", "options": ["Elephant", "Blue whale", "Giraffe", "Rhino"]},
      {"index": "Question_2", "timestamp": 83.2, "duration": 7.16, "question": "Which country is the second largest population in the world?", "question_type": "Poll", "options": ["China", "India", "The United States", "Brazil"]},
      {"index": "Question_3", "timestamp": 104.04, "duration": 15.6, "question": "Which of the following animals is not a mammal?", "question_type": "Poll", "options": ["Dog", "Cat", "Bird", "Whale", "Dolphin", "Bat"]},
      {"index": "Question_4", "timestamp": 121.32, "duration": 8.16, "question": "Which programming language is the best?", "question_type": "Open", "options": []}
    ];

    // Function to initialize YouTube player
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '360',
        width: '640',
        videoId: 'kzJZWO21PVw', // Replace VIDEO_ID with your YouTube video ID
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
      });
    }

    // Function to execute when YouTube player is ready
    function onPlayerReady(event) {
      // Start tracking video time
      setInterval(checkVideoTime, 1000);
    }

    // Function to check current video time and display questions if needed
    function checkVideoTime() {
      var currentTime = player.getCurrentTime();
      for (var i = 0; i < questions.length; i++) {
        var question = questions[i];
        if (currentTime >= question.timestamp && currentTime < question.timestamp + question.duration) {
          displayQuestion(question);
        }
      }
    }

    // Function to display a question
    function displayQuestion(question) {
      var questionsDiv = document.getElementById('questions');
      questionsDiv.innerHTML = ''; // Clear previous questions
      var questionElement = document.createElement('div');
      questionElement.innerHTML = '<h3>' + question.question + '</h3>';
      for (var i = 0; i < question.options.length; i++) {
        var option = question.options[i];
        var optionElement = document.createElement('input');
        optionElement.type = 'radio';
        optionElement.name = 'question_' + question.index;
        optionElement.value = option;
        optionElement.id = 'option_' + i;
        var labelElement = document.createElement('label');
        labelElement.htmlFor = 'option_' + i;
        labelElement.textContent = option;
        questionElement.appendChild(optionElement);
        questionElement.appendChild(labelElement);
        questionElement.appendChild(document.createElement('br'));
      }
      questionsDiv.appendChild(questionElement);
    }

    // Function to execute when video state changes
    function onPlayerStateChange(event) {
      // You can add code here if you need to handle player state changes
    }
  </script>
</body>
</html>
